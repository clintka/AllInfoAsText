<!DOCTYPE html>
<html>
  <head>
    <title>All Info As Text Config</title>
  </head>
  <body>
    <h1>All Info As Text Config</h1>
    <p>Choose settings:</p>

    <p>Please note: Opening this page always displays the default watch settings.</p>

    <p>Temperature Units:
    <select id="key_temperature_units_select">
      <option value="F">F</option>
      <option value="C" selected>C</option>
    </select>
    </p>

    <p>Windspeed Units:
    <select id="key_windspeed_units_select">
      <option value="KNOTS">Knots</option>
      <option value="MPH">MPH</option>
      <option value="KPH">KM/HR</option>
    </select>
    </p>

    <p>Week Number (replaces seconds):
    <select id="key_weeknumber_enabled_select">
      <option value="DISABLED">Disabled</option>
      <option value="ENABLED">Enabled</option>
    </select>
    </p>

    <p>First day of the week:
    <select id="key_mondayFirst_select">
      <option value="DISABLED">Sunday</option>
      <option value="ENABLED">Monday</option>
    </select>
    </p>

    <p>
    <button id="save_button">Save</button>
    </p>

    <script>
//      function getQueryVariable(variable)
//      {
//             var query = window.location.search.substring(1);
//             var vars = query.split("&");
//             for (var i=0;i<vars.length;i++) {
//                     var pair = vars[i].split("=");
//                     if(pair[0] == variable){return pair[1];}
//             }
//             return(false);
//      }
      
      //Setup to allow easy adding more options later
      function saveOptions() {
        var temperatureUnits = document.getElementById("key_temperature_units_select");
        var windspeedUnits = document.getElementById("key_windspeed_units_select");
        var weekNumberEnabled = document.getElementById("key_weeknumber_enabled_select");
        var mondayFirst = document.getElementById("key_mondayFirst_select");
        var options = {
          "temperatureUnits": temperatureUnits.options[temperatureUnits.selectedIndex].value,
          "windspeedUnits": windspeedUnits.options[windspeedUnits.selectedIndex].value,
          "weekNumberEnabled": weekNumberEnabled.options[weekNumberEnabled.selectedIndex].value,
          "mondayFirst": mondayFirst.options[mondayFirst.selectedIndex].value
        }

        return options;
      };
      
      var submitButton = document.getElementById("save_button");
      submitButton.addEventListener("click", 
        function() {
          console.log("Submit");
          var options = saveOptions();
          var location = "pebblejs://close#" + encodeURIComponent(JSON.stringify(options));
          
          document.location = location;
        }, 
      false);
    </script>
  </body>
</html>
